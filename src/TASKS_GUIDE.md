# 任务安排页面说明

## 概述
任务安排页面用于管理测试任务的调度和执行，提供定时任务的创建、编辑、执行和监控功能。

## 功能特性

### 1. 任务列表展示
- **ID**：任务唯一标识符 (TS-001, TS-002等)
- **任务名称**：任务的描述性名称
- **执行频率**：每日/每周/每月
- **最近执行时间**：最后一次执行的时间
- **下次执行时间**：计划下次执行的时间
- **关联用例**：任务关联的测试用例数量
- **创建人**：任务的创建者
- **状态**：启用/禁用状态
- **操作**：编辑、删除按钮

### 2. 筛选功能
- **项目筛选**：按项目过滤任务
- **状态筛选**：按启用/禁用状态过滤
- **时间筛选**：全部/每日/每周/每月/创建时间

### 3. 任务详情面板
点击任务行后，右侧显示详细信息：

#### 任务摘要
- 任务名称和执行计划描述

#### 基本信息
- 创建者、创建时间
- 最后执行时间、下次执行时间
- 执行状态、关联用例数量

#### 执行计划
- 执行频率（每日/每周/每月）
- 执行时间
- 超时设置

#### 关联用例列表
- 显示关联的测试用例
- 用例执行状态（通过/失败）
- "查看全部"按钮

#### 最近执行结果
- 执行时间、耗时
- 通过/失败/警告统计
- "历史记录"按钮

### 4. 创建定时任务
点击"创建定时任务"按钮打开对话框：

#### 步骤指示器
- 1. 基本信息
- 2. 执行计划（当前步骤）
- 3. 选择用例

#### 执行计划设置
- **执行频率**：每日/每周/每月选择
- **执行周期设置**：
  - 选择执行日期（星期几）
  - 选择执行时间（开始-结束时间）
- **高级设置**：
  - 执行超时时间（分钟）
  - 重试次数
- **结果通知**：
  - 失败时邮件通知
  - 企业微信通知

### 5. 任务操作
- **编辑任务**：修改任务配置
- **删除任务**：删除任务（需确认）
- **立即执行**：手动触发任务执行
- **启用/禁用**：切换任务状态

## 技术实现

### 组件结构
```
Tasks.vue
├── 面包屑导航
├── 页面标题和创建按钮
├── 筛选区域
├── 主内容区域
│   ├── 任务列表表格
│   └── 任务详情面板
└── 创建任务对话框
```

### API接口
位置：`src/api/task.js`

- `getTaskList(params)` - 获取任务列表
- `getTaskDetail(id)` - 获取任务详情
- `createTask(data)` - 创建任务
- `updateTask(id, data)` - 更新任务
- `deleteTask(id)` - 删除任务
- `toggleTaskStatus(id, enabled)` - 切换任务状态
- `executeTask(id)` - 立即执行任务
- `getTaskExecutionHistory(id, params)` - 获取执行历史
- `getTaskStatistics(params)` - 获取统计信息
- `batchOperateTasks(data)` - 批量操作
- `exportTasks(params)` - 导出任务

### 数据结构
```javascript
{
  id: 'TS-001',                    // 任务ID
  name: '用户登录接口每日检查',      // 任务名称
  frequency: 'daily',              // 执行频率
  lastExecution: '2024-03-15 09:00', // 最近执行时间
  nextExecution: '2024-03-16 09:00', // 下次执行时间
  caseCount: 3,                    // 关联用例数量
  creator: '张工程师',             // 创建人
  status: 'enabled',               // 状态
  createTime: '2024-02-15 10:30',  // 创建时间
  executionTime: '09:00',          // 执行时间
  timeout: 30,                     // 超时时间
  cases: [...],                    // 关联用例
  executionResults: [...]          // 执行结果
}
```

## 使用方法

### 访问页面
导航至：`/tasks` 或点击左侧菜单"任务安排"

### 查看任务
1. 使用筛选条件过滤任务
2. 点击任务行查看详细信息
3. 在右侧面板查看任务详情

### 创建任务
1. 点击"创建定时任务"按钮
2. 设置执行计划：
   - 选择执行频率
   - 选择执行日期和时间
   - 设置超时和重试次数
   - 配置通知选项
3. 点击"下一步"继续

### 管理任务
1. 点击"编辑"修改任务配置
2. 点击"删除"删除任务
3. 使用状态切换启用/禁用任务

## 样式设计

### 布局特点
- **左右分栏**：任务列表 + 详情面板
- **响应式设计**：适配不同屏幕尺寸
- **卡片式布局**：清晰的信息分层
- **交互反馈**：悬停、选中状态

### 颜色方案
- 主色调：蓝色 (#409eff)
- 成功：绿色 (#67c23a)
- 警告：橙色 (#e6a23c)
- 危险：红色 (#f56c6c)
- 禁用：灰色 (#909399)

### 交互效果
- 行选中高亮
- 按钮悬停效果
- 对话框动画
- 状态切换动画

## 开发说明

### 模拟数据
页面包含完整的模拟数据，包括：
- 3个示例任务
- 不同的执行频率
- 关联用例和执行结果
- 完整的任务详情信息

### 扩展功能
可以考虑添加：
- 任务模板功能
- 批量操作任务
- 任务执行日志
- 任务依赖关系
- 任务执行图表
- 邮件/微信通知集成

## 注意事项

1. **权限控制**：确保用户有任务管理权限
2. **数据安全**：敏感任务配置需要加密
3. **性能优化**：大量任务时使用虚拟滚动
4. **错误处理**：网络错误时友好提示
5. **时区处理**：正确处理不同时区的时间

## 后续优化

- [ ] 添加任务模板功能
- [ ] 实现批量操作
- [ ] 添加任务执行图表
- [ ] 集成通知系统
- [ ] 添加任务依赖管理
- [ ] 实现任务执行日志

